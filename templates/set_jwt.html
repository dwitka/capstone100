<html>
	<head>
		<title>Set JWT Page</title>
	</head>
	<body>
		<form class="hidden" id="form" method="get" action="/set_jwt">
                    <input type="text" id="jwt" name="jwt" />
                
                
                <script>

                    function get_token () {
                        const queryString = window.location.search;
			console.log('------------->queryString-------->', queryString);
                        const urlParams = new URLSearchParams(queryString);
                        const token = urlParams.get('access_token');
                        console.log('------------->>>>>>>>>TOKEN--->', token);
                        return token;
                    };
                    
                    function parseJwt (token) {
                        // https://stackoverflow.com/questions/38552003/how-to-decode-jwt-token-in-javascript
                        var base64Url = token.split('.')[1];
                        var base64 = decodeURIComponent(atob(base64Url).split('').map((c)=>{
                        return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
                        }).join(''));
                    
                        return JSON.parse(base64);
                    }
                    document.getElementById('jwt').innerHTML = parseJwt(get_token())
                    ;
                </script>
		</form>
	</body>
</html>
